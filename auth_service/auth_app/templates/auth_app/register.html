<h2>Register</h2>
<form method="post">
    {% csrf_token %}
    <input type="text" name="username" placeholder="Username" required><br>
    <input type="password" name="password" placeholder="Password" required><br>
    <input type="text" name="first_name" placeholder="First Name" required><br>
    <input type="text" name="last_name" placeholder="Last Name" required><br>

    <select name="role" id="role" onchange="toggleFields()" required>
        <option value="">-- select role --</option>
        <option value="doctor">Doctor</option>
        <option value="patient">Patient</option>
    </select><br>

    <div id="doctor_fields" style="display:none;">
  <select name="specialization">
    <option value="">-- Choose a specialization --</option>
    <option value="ortopeda">Orthopedist</option>
    <option value="neurolog">Neuroloist</option>
    <option value="lekarz rodzinny">Family doctor</option>
    <option value="okulista">Ophthalmologist</option>
    <option value="laryngolog">ENT specialist</option>
    <option value="dermatolog">Dermatologist</option>
    <option value="ginekolog">Gynecologist</option>
    <option value="pediatra">Pediatrician</option>
    <option value="psychiatra">Psychiatrist</option>
  </select><br>
</div>

    <div id="patient_fields" style="display:none;">
        <input type="text" name="pesel" placeholder="PESEL"><br>
    </div>

    <button type="submit">Register</button>
</form>

<a href="{% url 'login' %}">Back to login</a>

<script>
function toggleFields() {
    const role = document.getElementById('role').value;
    document.getElementById('doctor_fields').style.display = role === 'doctor' ? 'block' : 'none';
    document.getElementById('patient_fields').style.display = role === 'patient' ? 'block' : 'none';
}
</script>
